<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>{% block title %}Outfit Showroom{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="{% static 'css/estilos.css' %}">

    {% block extra_head %}{% endblock %}
</head>

<body>
<div class="container">
    <header class="site-header" role="banner">
        <h1 class="brand"><a href="{% url 'showroom:index' %}">Outfit Showroom</a></h1>
        <nav class="nav" aria-label="Principal">
            <a href="{% url 'showroom:outfit_list' %}">Outfits</a>
            <a href="{% url 'showroom:occasion_list' %}">Ocasiones</a>
            <a href="{% url 'showroom:style_list' %}">Estilos</a>
            <a href="{% url 'showroom:enviar_outfit_ideal' %}">EnvÃ­anos tu outfit</a>
        </nav>
    </header>

    <main class="panel" role="main">
        {% block content %}{% endblock %}
    </main>
</div>

<footer class="site-footer">
    Â© 2025 â€“ Proyecto Web IW (Deusto)
</footer>


<!-- ============================================
     JS GLOBAL PARA INTERACCIÃ“N DEL FORMULARIO
     ============================================ -->
{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", () => {

    console.log("JS de base.html cargado correctamente");

    const form = document.querySelector("form.form-outfit");
    const submitBtn = document.getElementById("submit-btn");

    if (form && submitBtn) {

        form.addEventListener("submit", (e) => {

            // ðŸš« Si el botÃ³n estÃ¡ deshabilitado â†’ NO enviar
            if (submitBtn.disabled || submitBtn.classList.contains("btn-disabled-danger")) {
                console.log("Bloqueado: botÃ³n deshabilitado");
                e.preventDefault();
                return;
            }

            // âœ” Si es vÃ¡lido â†’ activar animaciÃ³n
            console.log("Formulario vÃ¡lido: activando loader");
            submitBtn.classList.add("btn-disabled");
            submitBtn.innerHTML = `Enviando... <span class="spinner"></span>`;
        });
    }

    /* --------------------------------------------------------------------
       PREVIEW GLOBAL DE IMAGEN (solo se activa en pÃ¡ginas que la tengan)
       -------------------------------------------------------------------- */
    const inputImg = document.querySelector("#id_imagen");
    const preview = document.querySelector("#preview-img");

    if (inputImg && preview) {
        inputImg.addEventListener("change", () => {
            const file = inputImg.files[0];
            if (!file) {
                preview.style.display = "none";
                return;
            }
            preview.src = URL.createObjectURL(file);
            preview.style.display = "block";
        });
    }

});
</script>
{% endblock %}

</body>
</html>