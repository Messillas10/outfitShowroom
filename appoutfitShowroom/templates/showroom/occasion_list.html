{% extends "showroom/base.html" %}
{% block title %}Ocasiones{% endblock %}
{% block content %}
<h2>Ocasiones</h2>
<p class="section-lead">Descubre outfits perfectos para cada momento especial.</p>

<div class="grid">
    {% for o in occasions %}
    <article class="card">
        {% if o.image %}
        <a href="{% url 'showroom:occasion_detail' o.slug %}" class="card-image">
            <img src="{{ o.image.url }}" alt="Outfit para {{ o.name }}">
        </a>
        {% elif o.outfits.first.image_url %}
        <!-- fallback to first outfit image if occasion has no image set -->
        <a href="{% url 'showroom:occasion_detail' o.slug %}" class="card-image">
            <img src="{{ o.outfits.first.image_url }}" alt="Outfit para {{ o.name }}">
        </a>
        {% endif %}
        <div class="card-body">
            <h3 class="card-title"><a href="{% url 'showroom:occasion_detail' o.slug %}">{{ o.name }}</a></h3>
            {% if o.description %}
            <p class="card-description">{{ o.description }}</p>
            {% endif %}
            <p class="meta">{{ o.outfits.count }} outfits disponibles</p>
        </div>
    </article>
    {% empty %}
    <p class="empty-message">No hay ocasiones disponibles.</p>
    {% endfor %}
</div>
{% endblock %}
